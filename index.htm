<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kooora Laghouat Live</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        
        body {
            background-color: #121212;
            color: #fff;
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 20px;
        }

        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { margin: 0; color: #f1c40f; font-size: 2rem; text-transform: uppercase; letter-spacing: 2px; }
        .header span { color: #fff; }

        .matches-container { max-width: 500px; margin: 0 auto; }

        .match-card {
            background: #1e1e1e;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            border: 1px solid #333;
            position: relative;
        }

        /* شريط الحالة (المهم جداً) */
        .status-badge {
            text-align: center;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 20px;
            width: fit-content;
            margin: 0 auto 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        /* تعريف الألوان بدقة */
        .bg-grey   { background: #333; color: #bbb; border: 1px solid #555; }
        .bg-green  { background: rgba(46, 204, 113, 0.2); color: #2ecc71; border: 1px solid #2ecc71; }
        .bg-orange { background: rgba(230, 126, 34, 0.2); color: #e67e22; border: 1px solid #e67e22; }

        .live-dot {
            width: 8px; height: 8px; background: #e74c3c; border-radius: 50%;
            animation: blink 1s infinite;
        }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.2; } 100% { opacity: 1; } }

        .teams-area { display: flex; justify-content: space-between; align-items: center; }
        
        .team { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; }
        .team img { width: 50px; height: 50px; object-fit: contain; margin-bottom: 8px; }
        .team-name { font-size: 0.9rem; font-weight: bold; line-height: 1.2; }

        .score-area { text-align: center; min-width: 90px; }
        .score { font-size: 2.2rem; font-weight: 900; letter-spacing: 2px; }
        .match-time { font-size: 0.8rem; color: #f1c40f; margin-top: 5px; }

    </style>
</head>
<body>

    <div class="header">
        <h1>Kooora <span>Laghouat</span></h1>
        <p style="color:#777; font-size:0.8rem;">النتائج المباشرة</p>
    </div>

    <div id="container" class="matches-container">
        <p style="text-align:center; color:#555; margin-top:50px;">جاري الاتصال...</p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAXLSZ5OqPEOnP0DUx3w75fU2xxiVkrWcE",
          authDomain: "koooralaghouat.firebaseapp.com",
          projectId: "koooralaghouat",
          storageBucket: "koooralaghouat.firebasestorage.app",
          messagingSenderId: "84750708348",
          appId: "1:84750708348:web:179ec7acf8fc2f357e23f9",
          measurementId: "G-4YSP7SWPGV"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        onSnapshot(collection(db, "matches"), (snapshot) => {
            const container = document.getElementById("container");
            container.innerHTML = "";
            
            if(snapshot.empty) {
                container.innerHTML = "<p style='text-align:center; color:#777;'>لا توجد مباريات حالياً</p>";
                return;
            }

            snapshot.forEach((doc) => {
                const m = doc.data();
                
                // === منطق الألوان الصارم ===
                let badgeClass = "bg-grey"; // اللون الافتراضي (رمادي)
                let dot = "";

                if (m.status === "الشوط الأول" || m.status === "الشوط الثاني") {
                    // إذا المباراة جارية (شوط 1 أو 2) -> أخضر
                    badgeClass = "bg-green";
                    dot = '<div class="live-dot"></div>';
                } 
                else if (m.status === "نهاية الشوط الأول") {
                    // إذا استراحة -> برتقالي
                    badgeClass = "bg-orange";
                }
                // باقي الحالات (لم تبدأ، نهاية المباراة) تبقى رمادي

                container.innerHTML += `
                <div class="match-card">
                    <div class="status-badge ${badgeClass}">
                        ${dot} ${m.status}
                    </div>

                    <div class="teams-area">
                        <div class="team">
                            <img src="${m.homeLogo}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/53/53283.png'">
                            <span class="team-name">${m.home}</span>
                        </div>

                        <div class="score-area">
                            <div class="score">${m.scoreA} - ${m.scoreH}</div>
                            <div class="match-time">${m.time}</div>
                        </div>

                        <div class="team">
                            <img src="${m.awayLogo}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/53/53283.png'">
                            <span class="team-name">${m.away}</span>
                        </div>
                    </div>
                </div>`;
            });
        });
    </script>
</body>
</html>