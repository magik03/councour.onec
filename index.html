
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>استمارة المعلومات للمسابقات</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f1f5f9;
            color: #0f172a;
        }
        .form-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        .section-header {
            background-color: #1e293b;
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            display: inline-block;
            font-size: 1rem;
        }
        input, select, textarea {
            border: 2px solid #cbd5e1;
            padding: 0.8rem;
            border-radius: 0.6rem;
            width: 100%;
            margin-top: 0.4rem;
            transition: all 0.3s;
            font-weight: 600;
            background-color: #f8fafc;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            background-color: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        .label-title {
            font-weight: 700;
            color: #475569;
            display: block;
            font-size: 0.9rem;
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const wilayas = [
            "01- أدرار", "02- الشلف", "03- الأغواط", "04- أم البواقي", "05- باتنة", "06- بجاية", "07- بسكرة", "08- بشار", "09- البليدة", "10- البويرة",
            "11- تمنراست", "12- تبسة", "13- تلمسان", "14- تيارت", "15- تيزي وزو", "16- الجزائر", "17- الجلفة", "18- جيجل", "19- سطيف", "20- سعيدة",
            "21- سكيكدة", "22- سيدي بلعباس", "23- عنابة", "24- قالمة", "25- قسنطينة", "26- المدية", "27- مستغانم", "28- المسيلة", "29- معسكر", "30- ورقلة",
            "31- وهران", "32- البيض", "33- إليزي", "34- برج بوعريريج", "35- بومرداس", "36- الطارف", "37- تندوف", "38- تسمسيلت", "39- الوادي", "40- خنشلة",
            "41- سوق أهراس", "42- تيبازة", "43- ميلة", "44- عين الدفلى", "45- النعامة", "46- عين تموشنت", "47- غرداية", "48- غليزان", "49- تيميمون", "50- برج باجي مختار",
            "51- أولاد جلال", "52- بني عباس", "53- عين صالح", "54- عين قزام", "55- تقرت", "56- جانت", "57- المغير", "58- المنيعة"
        ];

        const communesMap = {
            "03- الأغواط": ["الأغواط", "قصر الحيران", "بن ناصر بن شهرة", "سيدي مخلوف", "حاسي الدلاعة", "حاسي الرمل", "عين ماضي", "تاجموت", "الخنق", "قلتة سيدي سعد", "أفلو", "البيضاء", "سيدي بوزيد", "الغيشة", "بريدة", "الحويطة", "تاجرونة", "سبقاق", "تاويالة", "وادي مرة", "وادي مزي", "العسافية", "بن يعقوب", "عين سيدي علي"],
            "17- الجلفة": ["الجلفة", "عين وسارة", "حاسي بحبح", "مسعد", "الشارف", "بيرين", "دار الشيوخ", "حد الصحاري", "الإدريسية", "عين الإبل", "تعظميت", "سيدي لعجل"],
            "16- الجزائر": ["الجزائر الوسطى", "سيدي امحمد", "المدنية", "بلوزداد", "باب الوادي", "بولوغين", "بوزريعة", "بئر مراد رايس", "الحراش", "الدار البيضاء", "دالي إبراهيم", "الشراقة"],
            "default": ["بلدية أخرى (كتابة يدوية)"]
        };

        const App = () => {
            const [step, setStep] = useState(1);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitted, setSubmitted] = useState(false);

            const [formData, setFormData] = useState({
                directorate: '', requestedRank: '', teachingSubject: '',
                nin: '', lastNameAr: '', firstNameAr: '', lastNameLat: '', firstNameLat: '',
                fatherName: '', motherFirstName: '', motherLastName: '', birthDate: '',
                birthWilaya: '', birthCommune: '', birthCommuneManual: '', gender: 'male',
                maritalStatus: 'أعزب / عزباء', childrenCount: '0', 
                residenceWilaya: '', residenceCommune: '', residenceCommuneManual: '', fullAddress: '', phoneNumber: '',
                militaryStatus: '', docRefNum: '', docIssueDate: '', docEndDate: '', serviceStartDate: '', serviceEndDate: '',
                degreeName: '', specialty: '', degreeNum: '', graduationDate: '', issuingInstitution: '', startYear: '', endYear: '', degreeGrade: '', 
                isEnsaGraduate: false, isFirstInClass: false,
                gpa: '', thesisGrade: '',
                semesters: Array(5).fill(null).map(() => ({ s1: '', s2: '', annual: '' })),
                otherDegreeName: '', otherDegreeSpecialty: '', otherDegreeIssuer: '', otherDegreeFromYear: '', otherDegreeToYear: '',
                publicationNature: '', publicationDate: '', journalName: '', publicationLink: '',
                expJob: '', expInstitution: '', expFrom: '', expTo: '', expEndReason: '',
                isEmployed: false, currentRank: '', firstAppointmentDate: '', rankAppointmentDate: '', currentGrade: '', adminPhone: '', adminAddress: '',
                email: '', attachedDocs: []
            });

            // تحديث الوثائق تلقائياً
            useEffect(() => {
                const docs = [];
                if (formData.residenceWilaya) docs.push("بطاقة الإقامة");
                if (formData.gender === 'male' && formData.militaryStatus) docs.push("وثيقة الخدمة الوطنية");
                if (formData.degreeName) docs.push("نسخة من الشهادة");
                if (formData.gpa) docs.push("كشوف النقاط");
                if (formData.expJob) docs.push("شهادات العمل");
                if (formData.isEmployed) docs.push("ترخيص المشاركة");
                setFormData(prev => ({ ...prev, attachedDocs: docs }));
            }, [formData.residenceWilaya, formData.gender, formData.militaryStatus, formData.degreeName, formData.gpa, formData.expJob, formData.isEmployed]);

            const birthCommunes = useMemo(() => communesMap[formData.birthWilaya] || communesMap["default"], [formData.birthWilaya]);
            const residenceCommunes = useMemo(() => communesMap[formData.residenceWilaya] || communesMap["default"], [formData.residenceWilaya]);

            const handleChange = (e) => {
                const { name, value, type, checked } = e.target;
                setFormData(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));
            };

            const handleSemesterChange = (index, field, value) => {
                const newSemesters = [...formData.semesters];
                newSemesters[index] = { ...newSemesters[index], [field]: value };
                setFormData(prev => ({ ...prev, semesters: newSemesters }));
            };

            const generateReportText = () => {
                const bCommune = formData.birthCommune === 'بلدية أخرى (كتابة يدوية)' ? formData.birthCommuneManual : formData.birthCommune;
                const rCommune = formData.residenceCommune === 'بلدية أخرى (كتابة يدوية)' ? formData.residenceCommuneManual : formData.residenceCommune;
                
                let text = `تقرير معلومات المترشح الكامل\n`;
                text += `==============================\n\n`;
                text += `1. المنصب المطلـوب:\n`;
                text += `- المديرية: ${formData.directorate}\n`;
                text += `- الرتبة: ${formData.requestedRank}\n`;
                text += `- المادة: ${formData.teachingSubject}\n\n`;
                
                text += `2. الهوية الشخصية:\n`;
                text += `- رقم التعريف (NIN): ${formData.nin}\n`;
                text += `- الاسم واللقب: ${formData.firstNameAr} ${formData.lastNameAr}\n`;
                text += `- الاسم واللقب (LATIN): ${formData.firstNameLat} ${formData.lastNameLat}\n`;
                text += `- اسم الأب: ${formData.fatherName}\n`;
                text += `- اسم ولقب الأم: ${formData.motherFirstName} ${formData.motherLastName}\n`;
                text += `- الميلاد: ${formData.birthDate} في ${bCommune} (${formData.birthWilaya})\n`;
                text += `- الجنس: ${formData.gender === 'male' ? 'ذكر' : 'أنثى'}\n`;
                text += `- الحالة العائلية: ${formData.maritalStatus} (الأولاد: ${formData.childrenCount})\n\n`;
                
                text += `3. السكن والاتصال:\n`;
                text += `- العنوان: ${formData.fullAddress}\n`;
                text += `- البلدية: ${rCommune} (${formData.residenceWilaya})\n`;
                text += `- الهاتف: ${formData.phoneNumber}\n`;
                text += `- البريد: ${formData.email}\n\n`;
                
                if (formData.gender === 'male' && formData.militaryStatus) {
                    text += `4. الخدمة الوطنية:\n`;
                    text += `- الوضعية: ${formData.militaryStatus}\n`;
                    text += `- رقم الوثيقة: ${formData.docRefNum}\n`;
                    text += `- التاريخ: من ${formData.serviceStartDate} إلى ${formData.serviceEndDate}\n\n`;
                }

                text += `5. المؤهل العلمي:\n`;
                text += `- الشهادة: ${formData.degreeName} (${formData.specialty})\n`;
                text += `- رقم الشهادة: ${formData.degreeNum} بتاريخ ${formData.graduationDate}\n`;
                text += `- المؤسسة: ${formData.issuingInstitution}\n`;
                text += `- التقدير: ${formData.degreeGrade}\n`;
                text += `- المعدل العام: ${formData.gpa}\n`;
                text += `- علامة المذكرة: ${formData.thesisGrade}\n\n`;

                text += `6. كشوف النقاط:\n`;
                formData.semesters.forEach((s, i) => {
                    if (s.annual) text += `- السنة ${i+1}: س1(${s.s1}) | س2(${s.s2}) | السنوي(${s.annual})\n`;
                });
                text += `\n`;

                text += `7. الخبرة المهنية:\n`;
                text += `- الوظيفة: ${formData.expJob} في ${formData.expInstitution}\n`;
                text += `- الفترة: من ${formData.expFrom} إلى ${formData.expTo}\n`;
                text += `- سبب المغادرة: ${formData.expEndReason}\n\n`;

                if (formData.isEmployed) {
                    text += `8. الوظيفة الحالية:\n`;
                    text += `- الرتبة: ${formData.currentRank}\n`;
                    text += `- تاريخ التعيين: ${formData.firstAppointmentDate}\n`;
                    text += `- هاتف الإدارة: ${formData.adminPhone}\n`;
                    text += `- عنوان الإدارة: ${formData.adminAddress}\n\n`;
                }

                text += `9. الوثائق المرفقة:\n`;
                text += formData.attachedDocs.join(" | ") + `\n`;
                
                return text;
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsSubmitting(true);

                // تجهيز الملف النصي
                const reportContent = generateReportText();
                const reportBlob = new Blob([reportContent], { type: 'text/plain' });
                const reportFile = new File([reportBlob], "ملف_المعلومات_كامل.txt", { type: 'text/plain' });

                const form = new FormData();
                
                // إضافة معلومات الإيميل الأساسية (ستظهر في الجدول العلوي للإيميل)
                form.append("رقم التعريف الوطني (NIN)", formData.nin);
                form.append("الاسم واللقب", `${formData.firstNameAr} ${formData.lastNameAr}`);
                form.append("الرتبة المطلوبة", formData.requestedRank);
                form.append("المادة", formData.teachingSubject);
                form.append("رقم الهاتف", formData.phoneNumber);
                form.append("البريد الإلكتروني", formData.email);

                // إضافة كافة البيانات الأخرى لضمان وصولها في جدول الإيميل
                form.append("--- معلومات الهوية ---", "------------------");
                form.append("تاريخ ومكان الميلاد", `${formData.birthDate} في ${formData.birthCommune} (${formData.birthWilaya})`);
                form.append("اسم الأب والأم", `${formData.fatherName} ابن ${formData.motherFirstName} ${formData.motherLastName}`);
                form.append("الحالة العائلية", `${formData.maritalStatus} (الأولاد: ${formData.childrenCount})`);
                form.append("عنوان السكن", `${formData.fullAddress} - ${formData.residenceCommune} (${formData.residenceWilaya})`);

                form.append("--- معلومات الشهادة ---", "------------------");
                form.append("تسمية الشهادة", `${formData.degreeName} - تخصص ${formData.specialty}`);
                form.append("رقم وتاريخ الشهادة", `${formData.degreeNum} بتـاريخ ${formData.graduationDate}`);
                form.append("المعدل العام للمسار", formData.gpa);
                form.append("تقدير الشهادة", formData.degreeGrade);

                form.append("--- كشوف النقاط السنوية ---", "------------------");
                formData.semesters.forEach((s, i) => {
                    if (s.annual) form.append(`معدل السنة ${i+1}`, `س1: ${s.s1} | س2: ${s.s2} | سنوي: ${s.annual}`);
                });

                if (formData.isEmployed) {
                    form.append("--- الوظيفة الحالية ---", "------------------");
                    form.append("الرتبة الحالية", formData.currentRank);
                    form.append("هاتف الإدارة", formData.adminPhone);
                }

                // إرفاق الملف النصي
                form.append("الملف المرفق (TXT للنسخ)", reportFile);

                // إعدادات FormSubmit
                form.append("_subject", `استمارة كاملة - ${formData.firstNameAr} ${formData.lastNameAr} (NIN: ${formData.nin})`);
                form.append("_template", "table");
                form.append("_captcha", "false");

                try {
                    const response = await fetch("https://formsubmit.co/ajax/ksarinfo.impr@gmail.com", {
                        method: "POST",
                        body: form
                    });
                    if (response.ok) setSubmitted(true);
                    else alert("خطأ في الإرسال، يرجى المحاولة لاحقاً.");
                } catch {
                    alert("خطأ في الاتصال بالإنترنت.");
                } finally {
                    setIsSubmitting(false);
                }
            };

            if (submitted) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6 animate-fade-in text-center">
                        <div className="bg-white p-10 rounded-2xl shadow-2xl max-w-lg w-full border-t-8 border-green-600">
                            <div className="text-green-600 text-6xl mb-4">✓</div>
                            <h2 className="text-2xl font-black mb-2">تم إرسال الملف بنجاح!</h2>
                            <p className="text-gray-600 font-bold mb-8">تم إرسال كافة البيانات في جدول مفصل مع إرفاق ملف نصي (TXT) للنسخ واللصق.</p>
                            <button onClick={() => window.location.reload()} className="bg-slate-800 text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-slate-700 transition w-full">إرسال استمارة أخرى</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-4xl mx-auto py-10 px-4">
                    <header className="mb-10 text-center bg-white p-6 rounded-2xl shadow-lg border-b-8 border-slate-800">
                        <h1 className="text-2xl md:text-3xl font-black text-slate-800">استمارة المسابقات الإلكترونية</h1>
                        <p className="text-blue-600 font-bold mt-1 italic">سيصل ملفك كاملاً (جدول + TXT) إلى الإدارة</p>
                    </header>

                    <div className="mb-8 flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                        {[1, 2, 3, 4, 5, 6].map(s => (
                            <div key={s} className={`flex-1 min-w-[80px] text-center pb-2 border-b-4 transition ${step >= s ? 'border-blue-600 text-blue-600' : 'border-slate-200 text-slate-400'} font-black text-xs`}>المرحلة {s}</div>
                        ))}
                    </div>

                    <form onSubmit={handleSubmit} className="space-y-6">
                        {step === 1 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">1. معلومات المنصب والهوية</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label className="label-title">مديرية التربية لولاية</label>
                                        <select name="directorate" required value={formData.directorate} onChange={handleChange}>
                                            <option value="">-- اختر الولاية --</option>
                                            {wilayas.map(w => <option key={w} value={w}>{w}</option>)}
                                        </select>
                                    </div>
                                    <div><label className="label-title">الرتبة المطلوبة</label>
                                        <select name="requestedRank" required value={formData.requestedRank} onChange={handleChange}>
                                            <option value="">-- اختر الرتبة --</option>
                                            {["أستاذ مدرسة ابتدائية", "أستاذ تعليم متوسط", "أستاذ تعليم ثانوي"].map(r => <option key={r} value={r}>{r}</option>)}
                                        </select>
                                    </div>
                                    <div className="md:col-span-2"><label className="label-title">مادة التدريس</label><input type="text" name="teachingSubject" required value={formData.teachingSubject} onChange={handleChange} /></div>
                                    <div className="md:col-span-2"><label className="label-title">رقم التعريف الوطني (18 رقم)</label><input type="text" name="nin" maxLength="18" required value={formData.nin} onChange={handleChange} /></div>
                                    <div><label className="label-title">الاسم (عربي)</label><input type="text" name="firstNameAr" required value={formData.firstNameAr} onChange={handleChange} /></div>
                                    <div><label className="label-title">اللقب (عربي)</label><input type="text" name="lastNameAr" required value={formData.lastNameAr} onChange={handleChange} /></div>
                                    <div><label className="label-title">الاسم (LATIN)</label><input type="text" name="firstNameLat" dir="ltr" required value={formData.firstNameLat} onChange={handleChange} /></div>
                                    <div><label className="label-title">اللقب (LATIN)</label><input type="text" name="lastNameLat" dir="ltr" required value={formData.lastNameLat} onChange={handleChange} /></div>
                                </div>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">2. معلومات الميلاد والعائلة</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label className="label-title">تاريخ الميلاد</label><input type="date" name="birthDate" required value={formData.birthDate} onChange={handleChange} /></div>
                                    <div><label className="label-title">ولاية الميلاد</label>
                                        <select name="birthWilaya" required value={formData.birthWilaya} onChange={handleChange}>
                                            <option value="">-- اختر --</option>
                                            {wilayas.map(w => <option key={w} value={w}>{w}</option>)}
                                        </select>
                                    </div>
                                    <div><label className="label-title">بلدية الميلاد</label>
                                        <select name="birthCommune" required value={formData.birthCommune} onChange={handleChange}>
                                            <option value="">-- اختر --</option>
                                            {birthCommunes.map(c => <option key={c} value={c}>{c}</option>)}
                                        </select>
                                    </div>
                                    {formData.birthCommune === 'بلدية أخرى (كتابة يدوية)' && (
                                        <div><label className="label-title">اكتب بلدية الميلاد يدوياً</label><input type="text" name="birthCommuneManual" required value={formData.birthCommuneManual} onChange={handleChange} /></div>
                                    )}
                                    <div><label className="label-title">اسم الأب</label><input type="text" name="fatherName" required value={formData.fatherName} onChange={handleChange} /></div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div><label className="label-title">اسم الأم</label><input type="text" name="motherFirstName" required value={formData.motherFirstName} onChange={handleChange} /></div>
                                        <div><label className="label-title">لقب الأم</label><input type="text" name="motherLastName" required value={formData.motherLastName} onChange={handleChange} /></div>
                                    </div>
                                    <div><label className="label-title">الحالة العائلية</label>
                                        <select name="maritalStatus" value={formData.maritalStatus} onChange={handleChange}>
                                            {["أعزب / عزباء", "متزوج(ة)", "مطلق(ة)", "أرمل(ة)"].map(m => <option key={m} value={m}>{m}</option>)}
                                        </select>
                                    </div>
                                    <div><label className="label-title">عدد الأولاد</label><input type="number" name="childrenCount" min="0" value={formData.childrenCount} onChange={handleChange} /></div>
                                </div>
                            </div>
                        )}

                        {step === 3 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">3. السكن والشهادة</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label className="label-title">ولاية الإقامة</label>
                                        <select name="residenceWilaya" required value={formData.residenceWilaya} onChange={handleChange}>
                                            <option value="">-- اختر --</option>
                                            {wilayas.map(w => <option key={w} value={w}>{w}</option>)}
                                        </select>
                                    </div>
                                    <div><label className="label-title">بلدية الإقامة</label>
                                        <select name="residenceCommune" required value={formData.residenceCommune} onChange={handleChange}>
                                            <option value="">-- اختر --</option>
                                            {residenceCommunes.map(c => <option key={c} value={c}>{c}</option>)}
                                        </select>
                                    </div>
                                    {formData.residenceCommune === 'بلدية أخرى (كتابة يدوية)' && (
                                        <div className="md:col-span-2"><label className="label-title">اكتب بلدية الإقامة يدوياً</label><input type="text" name="residenceCommuneManual" required value={formData.residenceCommuneManual} onChange={handleChange} /></div>
                                    )}
                                    <div className="md:col-span-2"><label className="label-title">العنوان التفصيلي</label><input type="text" name="fullAddress" required value={formData.fullAddress} onChange={handleChange} /></div>
                                    
                                    <div className="md:col-span-2 border-t pt-4 mt-2">
                                        <h3 className="font-bold text-blue-700 underline mb-2">معلومات الشهادة:</h3>
                                    </div>
                                    <div><label className="label-title">الشهادة</label>
                                        <select name="degreeName" required value={formData.degreeName} onChange={handleChange}>
                                            <option value="">-- اختر --</option>
                                            {["ليسانس", "ماستر", "دراسات عليا", "مهندس"].map(d => <option key={d} value={d}>{d}</option>)}
                                        </select>
                                    </div>
                                    <div><label className="label-title">التخصص</label><input type="text" name="specialty" required value={formData.specialty} onChange={handleChange} /></div>
                                    <div><label className="label-title">رقم الشهادة</label><input type="text" name="degreeNum" required value={formData.degreeNum} onChange={handleChange} /></div>
                                    <div><label className="label-title">تاريخ الشهادة</label><input type="date" name="graduationDate" required value={formData.graduationDate} onChange={handleChange} /></div>
                                </div>
                            </div>
                        )}

                        {step === 4 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">4. كشوف النقاط</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div><label className="label-title">المعدل العام للمسار</label><input type="text" name="gpa" placeholder="00.00" value={formData.gpa} onChange={handleChange} /></div>
                                    <div><label className="label-title">علامة المذكرة</label><input type="text" name="thesisGrade" value={formData.thesisGrade} onChange={handleChange} /></div>
                                </div>
                                <div className="overflow-x-auto border rounded-xl">
                                    <table className="w-full text-center">
                                        <thead className="bg-slate-100 font-black text-xs">
                                            <tr><th className="p-2">السنة</th><th className="p-2">س1</th><th className="p-2">س2</th><th className="p-2">سنوي</th></tr>
                                        </thead>
                                        <tbody className="divide-y font-bold text-sm">
                                            {[1, 2, 3, 4, 5].map((y, idx) => (
                                                <tr key={y}>
                                                    <td className="p-2 bg-slate-50">السنة {y}</td>
                                                    <td><input type="text" className="w-full text-center border-none p-1" value={formData.semesters[idx].s1} onChange={(e) => handleSemesterChange(idx, 's1', e.target.value)} /></td>
                                                    <td><input type="text" className="w-full text-center border-none p-1" value={formData.semesters[idx].s2} onChange={(e) => handleSemesterChange(idx, 's2', e.target.value)} /></td>
                                                    <td><input type="text" className="w-full text-center border-none p-1" value={formData.semesters[idx].annual} onChange={(e) => handleSemesterChange(idx, 'annual', e.target.value)} /></td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {step === 5 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">5. الخبرة والوضعية الحالية</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label className="label-title">آخر وظيفة سابقة</label><input type="text" name="expJob" value={formData.expJob} onChange={handleChange} /></div>
                                    <div><label className="label-title">المؤسسة</label><input type="text" name="expInstitution" value={formData.expInstitution} onChange={handleChange} /></div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div><label className="label-title">من تاريخ</label><input type="date" name="expFrom" value={formData.expFrom} onChange={handleChange} /></div>
                                        <div><label className="label-title">إلى تاريخ</label><input type="date" name="expTo" value={formData.expTo} onChange={handleChange} /></div>
                                    </div>
                                    <div className="md:col-span-2 flex items-center gap-2 p-4 bg-blue-50 border rounded-xl mt-4">
                                        <input type="checkbox" name="isEmployed" checked={formData.isEmployed} onChange={handleChange} className="w-5 h-5" />
                                        <span className="font-black text-blue-800">هل تشغل وظيفة حالياً؟</span>
                                    </div>
                                    {formData.isEmployed && (
                                        <div className="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in bg-slate-50 p-4 rounded-xl">
                                            <div><label className="label-title">الرتبة المشغولة</label><input type="text" name="currentRank" required={formData.isEmployed} value={formData.currentRank} onChange={handleChange} /></div>
                                            <div><label className="label-title">هاتف الإدارة</label><input type="text" name="adminPhone" required={formData.isEmployed} value={formData.adminPhone} onChange={handleChange} /></div>
                                            <div className="md:col-span-2"><label className="label-title">عنوان الإدارة</label><input type="text" name="adminAddress" required={formData.isEmployed} value={formData.adminAddress} onChange={handleChange} /></div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {step === 6 && (
                            <div className="form-section animate-fade-in">
                                <h2 className="section-header">6. الاتصال والتأكيد النهائي</h2>
                                <div className="space-y-4">
                                    <div><label className="label-title text-blue-700">رقم هاتف المترشح</label><input type="text" name="phoneNumber" required value={formData.phoneNumber} onChange={handleChange} /></div>
                                    <div><label className="label-title text-blue-700">البريد الإلكتروني الشخصي (إلزامي للرد)</label><input type="email" name="email" required placeholder="example@gmail.com" value={formData.email} onChange={handleChange} /></div>
                                    <div className="bg-yellow-50 p-4 rounded-xl border-2 border-dashed border-yellow-300">
                                        <p className="font-black text-yellow-900 text-sm">⚠️ ملاحظة: سيصل ملفك للإدارة في شكل جدول بيانات مفصل داخل الإيميل، مع إرفاق ملف نصي (TXT) يحتوي على كافة المعلومات للنسخ واللصق السريع.</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="flex justify-between items-center py-6">
                            {step > 1 && <button type="button" onClick={() => setStep(step - 1)} className="bg-slate-300 text-slate-800 px-8 py-3 rounded-xl font-black hover:bg-slate-400">السابق</button>}
                            {step < 6 ? (
                                <button type="button" onClick={() => setStep(step + 1)} className="mr-auto bg-blue-600 text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-blue-700">التالي</button>
                            ) : (
                                <button type="submit" disabled={isSubmitting} className={`mr-auto px-10 py-3 rounded-xl font-black shadow-2xl transition ${isSubmitting ? 'bg-slate-400' : 'bg-green-600 text-white hover:bg-green-700'}`}>
                                    {isSubmitting ? 'جاري التحضير والإرسال...' : 'إرسال الملف الكامل (TXT + جدول)'}
                                </button>
                            )}
                        </div>
                    </form>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

